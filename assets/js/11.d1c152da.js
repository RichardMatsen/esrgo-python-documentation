(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{221:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("p",[t._v("SqlAlchemy ORM is the Python equivalent of .Net’s Entity Framework. It can be used to compose SQL queries against the database and return result sets. This document describes the Python syntax used to implement a couple of the extraction use-cases of the interface project.")]),t._v(" "),t._m(2),t._v(" "),a("p",[t._v("The basic requirement is an ORM Session with mapper defining relationships between Model classes and tables. A Repository encapsulates the table mappings for loading the data, so this can be re-used for the extractions.")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._m(5),t._v(" "),t._m(6),t._m(7),t._v(" "),a("p",[t._v("The query() method of the Session object kicks off the definition of the query. It can take a class as a parameter, which tells the ORM what table to base the SELECT on.")]),t._v(" "),a("p",[t._v("In this example, the Assignment class is specified, which the mapper will translate into the assignment table. By specifying the class only, all columns will be returned.")]),t._v(" "),t._m(8),t._v(" "),t._m(9),t._m(10),t._v(" "),t._m(11),t._m(12),t._v(" "),a("p",[t._v("To restrict the columns returned, we can specify a list of the class attributes as arguments to Query().")]),t._v(" "),t._m(13),t._v(" "),t._m(14),t._m(15),t._v(" "),t._m(16),t._m(17),t._v(" "),a("p",[t._v("If the ORM already has table relationships defined, it is sufficient to specify the tables in the query() method.")]),t._v(" "),t._m(18),t._v(" "),t._m(19),t._m(20),t._v(" "),t._m(21),t._m(22),t._v(" "),a("p",[t._v("In this project the tables aren’t joined by foreign keys, because the use of EffectiveDate makes it difficult to precisely define the relationship.")]),t._v(" "),a("p",[t._v("Instead, we define the join criteria in the extract query, with the effective date parameterizing the SQL.")]),t._v(" "),a("p",[t._v("Note, when we specify columns in the query() method, the first table referenced (PersonDetail) is the “primary” table and the join() method references the “secondary” table (Assignment).")]),t._v(" "),t._m(23),t._v(" "),t._m(24),t._m(25),t._v(" "),t._m(26),t._m(27),t._v(" "),a("p",[t._v("For queries that require a table to be joined to itself, we can create an alias and join the table to the alias as if they were two tables, or join the table to a subquery.")]),t._v(" "),a("p",[t._v("This example extracts a full set of a person’s Assignments where any of the set has StateValue == 0.")]),t._v(" "),t._m(28),t._v(" "),t._m(29),t._m(30),t._v(" "),t._m(31),t._m(32),t._v(" "),a("p",[t._v("The Snapshot data is a join between the current PersonDetail record (Name, DOB, NI Number, etc) and the current Assignment record (Organisation, Payscale, Contracted Hours, etc).  Additionally, the Organisation table provides Organisation Name.")]),t._v(" "),a("p",[t._v("The criteria are:")]),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),a("p",[t._v("The SqlAlchemy query for selecting Snapshot data is:")]),t._v(" "),t._m(35),a("p",[t._v("which produces the SQL statement:")]),t._v(" "),t._m(36),t._m(37),t._v(" "),t._m(38),t._v(" "),a("p",[t._v("Since the tables are keyed on Id + EffectiveDate, it’s difficult to define a foreign key relationship between tables.")]),t._v(" "),a("p",[t._v("Strictly speaking, at any one date there is a one-to-many relationship between PersonDetail and Assignment, because there can only be one PersonDetail record on a date but there can be many overlapping Assignments.")]),t._v(" "),a("p",[t._v("However, the records are keyed by their start dates and these will differ between the tables, so an FK cannot be defined in the database.")]),t._v(" "),a("p",[t._v("Therefore, we treat the join criteria as use-case specific. This is useful because a globally defined relationship creates a dependency between different extract use-cases. We can can adjust the relationship used in the Snapshot extract without impacting other extracts.")]),t._v(" "),t._m(39),t._v(" "),a("p",[t._v("In the inner join from PersonDetail to Assignment, PersonDetail is the “primary” table because it is the first table referenced in the extract_columns list (the list of columns to be selected).")]),t._v(" "),a("p",[t._v("This means the join function is")]),t._v(" "),t._m(40),t._v(" "),a("p",[t._v("and not")]),t._v(" "),t._m(41),t._v(" "),a("p",[t._v("which would give a runtime error.")]),t._v(" "),t._m(42),t._v(" "),a("p",[t._v("The second join is an outer join between Assignment and Organisation to obtain the OrganisationName column. In the business context, this is a mandatory join - the Assignment makes no sense if there is no Organisation linked to it.")]),t._v(" "),a("p",[t._v("During testing it was found that some assignments had a reference to a non-existent organisation, which clearly is an error. However, it was decided to substitute an error code for the missing Organisation name and allow the data to proceed. To enable this, an outer join is used in the query.")]),t._v(" "),t._m(43),t._v(" "),a("p",[t._v("The table columns to be extracted are defined in the extract_columns property. Specifying the required columns reduces the width of data extracted from the database.")]),t._v(" "),t._m(44),a("p",[t._v("Most of these columns are passed to the GatewaySnapshotRecord class to create the DTO to send to Gateway, but we also extract the Id’s and EffectiveDate’s of PersonDetail and Assignment so that the records can be marked as processed.")]),t._v(" "),t._m(45),t._v(" "),a("p",[t._v("Once a record has been sent to Gateway it is marked as processed in the database so that that it will not be sent in the next run. This only occurs if the row has not encountered fatal errors in the Validate() method and therefore would not have been sent.")]),t._v(" "),t._m(46),t._m(47),t._v(" "),a("p",[t._v("Assignments can vary over time, so are stored with a combined key of Id + EffectiveDate. This extract requires all future-dated assignments to be processed as a set. Note that the person may have more than one active assignment. These are treated as independent sets.")]),t._v(" "),a("p",[t._v("The criteria for selection are:")]),t._v(" "),t._m(48),t._v(" "),t._m(49),t._v(" "),a("p",[t._v("This extract requires a table self-join, which can be done in two ways in SqlAlchemy.")]),t._v(" "),t._m(50),t._v(" "),t._m(51),a("p",[t._v("which produces the SQL statement:")]),t._v(" "),t._m(52),t._m(53),t._v(" "),t._m(54),a("p",[t._v("which produces the SQL statement:")]),t._v(" "),t._m(55),a("MiniMap")],1)},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"extracting-data-with-sqlalchemy-orm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extracting-data-with-sqlalchemy-orm","aria-hidden":"true"}},[this._v("#")]),this._v(" Extracting Data with SqlAlchemy ORM")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"sqlalchemy-query"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sqlalchemy-query","aria-hidden":"true"}},[this._v("#")]),this._v(" SqlAlchemy Query")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"prerequisites-table-mappings"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites-table-mappings","aria-hidden":"true"}},[this._v("#")]),this._v(" Prerequisites - Table Mappings")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("SqlAlchemy Repository with table mappings")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" sqlalchemy "),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" create_engine"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" MetaData\n"),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" sqlalchemy"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("orm "),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Session"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" scoped_session"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sessionmaker"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" clear_mappers"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mapper\n"),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" sqlalchemy"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("orm"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exc "),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" NoResultFound\n"),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" Database"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Table_Definitions "),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" Model "),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" Database"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("abstract_repository "),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" AbstractRepository\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("GenericSqlRepository")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AbstractRepository"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("__init__")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" uri"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" echo"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token boolean"}},[t._v("False")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bulk_load_buffer"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token boolean"}},[t._v("None")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uri "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" uri\n        self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("engine "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_engine"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uri"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" echo"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("echo"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("metadata "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" MetaData"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("engine"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("session "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" scoped_session"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sessionmaker"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bind"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("engine"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("session"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("autoflush "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("False")]),t._v("\n        self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_all_tables"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_map_tables"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("create_all_tables")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("absence_training_table "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" table_factory_absence_training\n                                         "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("make_absence_training_table"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("metadata"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address_table "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" table_factory_address"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("make_address_table"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("metadata"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        … more tables\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("_map_tables")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        clear_mappers"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        mapper"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("absence_training"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AbsenceTraining"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("absence_training_table"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        mapper"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Address"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address_table"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        … more tables\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("table  factory for addresses")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" sqlalchemy "),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Table"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Column"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Integer"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" DateTime"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Unicode"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Numeric\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("make_address_table")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("metadata"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Table"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'address'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" metadata"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                 Column"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'Id'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Integer"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" primary_key"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token boolean"}},[t._v("True")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                 Column"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'EffectiveDate'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" DateTime"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" primary_key"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token boolean"}},[t._v("True")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                 Column"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'EffectiveEndDate'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" DateTime"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                 Column"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'PersonId'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Integer"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                 Column"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'AddressType'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Unicode"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("255")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                 Column"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'AddressStyle'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Unicode"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("255")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                 Column"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'PrimaryFlag'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Integer"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                 Column"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'AddressFirstLine'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Unicode"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("255")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                 Column"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'AddressSecondLine'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Unicode"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("255")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                 Column"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'AddressThirdLine'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Unicode"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("255")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                 Column"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'AddressTown'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Unicode"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("255")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                 Column"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'AddressCounty'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Unicode"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("255")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                 Column"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'AddressPostcode'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Unicode"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("255")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                 Column"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'AddressCountry'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Unicode"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("255")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                 Column"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'LastUpdateDate'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" DateTime"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                 Column"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'StateValue'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Integer"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" default"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                 Column"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'TransportLineNo'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Integer"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" default"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"query"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#query","aria-hidden":"true"}},[this._v("#")]),this._v(" Query()")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("python")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("query "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" session"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("sql")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[this._v("SELECT")]),this._v(" "),s("span",{attrs:{class:"token operator"}},[this._v("*")]),this._v(" "),s("span",{attrs:{class:"token keyword"}},[this._v("FROM")]),this._v(" assignments\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"column-selection"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#column-selection","aria-hidden":"true"}},[this._v("#")]),this._v(" Column Selection")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("python")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("query "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" session"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AssignmentNumber"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Grade"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("sql")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[this._v("SELECT")]),this._v(" AssignmentNumber"),s("span",{attrs:{class:"token punctuation"}},[this._v(",")]),this._v(" Grade "),s("span",{attrs:{class:"token keyword"}},[this._v("FROM")]),this._v(" assignments\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"joining-tables-mapper-defined-relationship"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#joining-tables-mapper-defined-relationship","aria-hidden":"true"}},[this._v("#")]),this._v(" Joining tables - Mapper defined relationship")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("python")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("query "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" session"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Name"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AssignmentNumber"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("sql")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v("  pd"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Name"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" a"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AssignmentNumber\n"),a("span",{attrs:{class:"token keyword"}},[t._v("FROM")]),t._v("    person_detail pd"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" assignment a\n"),a("span",{attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v("   pd"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Id "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" a"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PersonId\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"joining-tables-explicit-join-criteria"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#joining-tables-explicit-join-criteria","aria-hidden":"true"}},[this._v("#")]),this._v(" Joining Tables - Explicit join criteria")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("python")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("query "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" session"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Name"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AssignmentNumber"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n               "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PersonId "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Id"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n               "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveDate "),a("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("effective_date"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n               "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveEndDate "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("effective_date"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n               "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveDate "),a("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("effective_date"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n               "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveEndDate "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("effective_date"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("sql")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v("   pd"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Name"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" a"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AssignmentNumber \n"),a("span",{attrs:{class:"token keyword"}},[t._v("FROM")]),t._v("     person_detail pd"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" assignment a\n"),a("span",{attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v("    pd"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Id "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" a"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PersonId\n"),a("span",{attrs:{class:"token operator"}},[t._v("AND")]),t._v("      a"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveDate "),a("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v(" ?\n"),a("span",{attrs:{class:"token operator"}},[t._v("AND")]),t._v("      a"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveEndDate "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" ?\n"),a("span",{attrs:{class:"token operator"}},[t._v("AND")]),t._v("      pd"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveDate "),a("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v(" ?\n"),a("span",{attrs:{class:"token operator"}},[t._v("AND")]),t._v("      pd"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveEndDate "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" ?\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"self-join-tables"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#self-join-tables","aria-hidden":"true"}},[this._v("#")]),this._v(" Self-Join Tables")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("python")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("sub_query "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" session"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PersonId"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StateValue "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("distinct"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subquery"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nquery "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" session"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PersonId"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AssignmentNumber"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sub_query"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PersonId "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" sub_query"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PersonId"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("sql")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PersonId"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AssignmentNumber\n"),a("span",{attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" assignment\n"),a("span",{attrs:{class:"token keyword"}},[t._v("JOIN")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DISTINCT")]),t._v(" assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PersonId\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" assignment\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StateValue "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" ?\n     "),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" anon_1\n"),a("span",{attrs:{class:"token keyword"}},[t._v("ON")]),t._v(" assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PersonId "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" anon_1"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PersonId\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"example-1-snapshot-data-stream"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-1-snapshot-data-stream","aria-hidden":"true"}},[this._v("#")]),this._v(" Example 1 - Snapshot Data Stream")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("p",[this._v("Only current records are output (ref EffectiveDate at time of extract)")])]),this._v(" "),s("li",[s("p",[this._v("Both PersonDetail and Assignment are required to be present (inner join)")])]),this._v(" "),s("li",[s("p",[this._v("Emit the record if either record is unprocessed, even if the other record has processed status")])]),this._v(" "),s("li",[s("p",[this._v("Organisation is optional (outer join) - if missing, an error code is substituted for the name")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"record-selection"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#record-selection","aria-hidden":"true"}},[this._v("#")]),this._v(" Record Selection")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("select")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    query "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("session"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extract_columns"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PersonId "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Id"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("outerjoin"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Organisation"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OrganisationId "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" Organisation"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Id"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveDate "),a("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("effective_date"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveEndDate "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("effective_date"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveDate "),a("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("effective_date"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveEndDate "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("effective_date"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("or_"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StateValue "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StateValue "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selection "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" query"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("all")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v("\n  person_detail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"Id"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"person_detail_Id"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  person_detail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"EffectiveDate"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"person_detail_EffectiveDate"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  person_detail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"EmployeeNumber"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"person_detail_EmployeeNumber"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"Id"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"assignment_Id"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"AssignmentNumber"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"assignment_AssignmentNumber"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  organisation"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"OrganisationName"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"organisation_OrganisationName"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" person_detail\n"),a("span",{attrs:{class:"token keyword"}},[t._v("JOIN")]),t._v(" assignment "),a("span",{attrs:{class:"token keyword"}},[t._v("ON")]),t._v(" assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"PersonId"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" person_detail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"Id"')]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("LEFT")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("OUTER")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("JOIN")]),t._v(" organisation "),a("span",{attrs:{class:"token keyword"}},[t._v("ON")]),t._v(" assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"OrganisationId"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" organisation"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"Id"')]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v("      assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"EffectiveDate"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v(" ?\n"),a("span",{attrs:{class:"token operator"}},[t._v("AND")]),t._v("        assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"EffectiveEndDate"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" ?\n"),a("span",{attrs:{class:"token operator"}},[t._v("AND")]),t._v("        person_detail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"EffectiveDate"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v(" ?\n"),a("span",{attrs:{class:"token operator"}},[t._v("AND")]),t._v("        person_detail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"EffectiveEndDate"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" ?\n"),a("span",{attrs:{class:"token operator"}},[t._v("AND")]),t._v("        organisation"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"EffectiveDate"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v(" ?\n"),a("span",{attrs:{class:"token operator"}},[t._v("AND")]),t._v("        organisation"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"EffectiveEndDate"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" ?\n"),a("span",{attrs:{class:"token operator"}},[t._v("AND")]),t._v("        "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"StateValue"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" ? "),a("span",{attrs:{class:"token operator"}},[t._v("OR")]),t._v(" person_detail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"StateValue"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" ?"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"joins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#joins","aria-hidden":"true"}},[this._v("#")]),this._v(" Joins")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"extract-specific-joins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extract-specific-joins","aria-hidden":"true"}},[this._v("#")]),this._v(" Extract-Specific Joins")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"implicit-primary-table"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#implicit-primary-table","aria-hidden":"true"}},[this._v("#")]),this._v(" Implicit Primary Table")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v(".join(Assignment, Assignment.PersonId == PersonDetail.Id)")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v(".join(PersonDetail, Assignment.PersonId == PersonDetail.Id)")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"relaxed-join-for-error-correction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#relaxed-join-for-error-correction","aria-hidden":"true"}},[this._v("#")]),this._v(" Relaxed Join for Error Correction")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"extract-columns"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extract-columns","aria-hidden":"true"}},[this._v("#")]),this._v(" Extract Columns")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("SnapshotGenerator")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("__init__")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" db"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" effective_date"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token boolean"}},[t._v("None")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extract_columns "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Id"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveDate"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EmployeeNumber"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LastName"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FirstName"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MiddleNames"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Title"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NationalInsuranceNumber"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DateOfBirth"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NHSStartDate"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Id"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AssignmentNumber"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OrganisationId"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                Organisation"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OrganisationName"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Grade"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PositionName"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PayrollName"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FTE"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NormalHoursSessions"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PrimaryAssignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveDate"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveEndDate"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"setting-processed-status"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setting-processed-status","aria-hidden":"true"}},[this._v("#")]),this._v(" Setting Processed Status")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("mark_as_processed")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" row "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selection"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("not")]),t._v(" row"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("has_fatal_errors"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            assignment "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_get_keys"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" row"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StateValue "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("\n            person_detail "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_get_keys"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PersonDetail"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" row"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            person_detail"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StateValue "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("\n    self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("commit"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("_get_keys")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _type"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" row"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("row"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extract_columns"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_type"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Id"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            row"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extract_columns"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_type"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveDate"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"example-2-assignment-changes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-2-assignment-changes","aria-hidden":"true"}},[this._v("#")]),this._v(" Example 2 - Assignment Changes")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("p",[this._v("Only current and future records are output")])]),this._v(" "),s("li",[s("p",[this._v("Emit the full set of records if any record in the set is unprocessed.")])]),this._v(" "),s("li",[s("p",[this._v("Organisation is optional (outer join) - if missing, an error message is substituted for the name")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"record-selection-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#record-selection-2","aria-hidden":"true"}},[this._v("#")]),this._v(" Record Selection")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"subquery-version"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#subquery-version","aria-hidden":"true"}},[this._v("#")]),this._v(" Subquery Version")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("select")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    person_select_sub_query "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("session"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PersonId"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveEndDate "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("effective_date"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StateValue "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("distinct"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subquery"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    query "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("session"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extract_columns"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("outerjoin"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Organisation"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OrganisationId "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" Organisation"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Id"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveEndDate "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("effective_date"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PersonId "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" person_select_sub_query"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PersonId"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selection "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" query"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("all")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v("\n  assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"PersonId"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"assignment_PersonId"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"Id"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"assignment_Id"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  organisation"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"OrganisationName"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"organisation_OrganisationName"')]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("FROM")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DISTINCT")]),t._v(" assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"PersonId"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"PersonId"')]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" assignment\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"EffectiveEndDate"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" ? "),a("span",{attrs:{class:"token operator"}},[t._v("AND")]),t._v(" assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"StateValue"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" ?\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" anon_1"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  assignment\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("LEFT")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("OUTER")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("JOIN")]),t._v(" organisation "),a("span",{attrs:{class:"token keyword"}},[t._v("ON")]),t._v(" assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"OrganisationId"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" organisation"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"Id"')]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"EffectiveEndDate"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" ?\n  "),a("span",{attrs:{class:"token operator"}},[t._v("AND")]),t._v("   assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"PersonId"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" anon_1"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"PersonId"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"aliased-table-version"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#aliased-table-version","aria-hidden":"true"}},[this._v("#")]),this._v(" Aliased Table Version")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("assignment_set_selector "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" aliased"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nquery "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("session"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extract_columns"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("assignment_set_selector"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PersonId "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" \\\n      assignment_set_selector"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PersonId"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("outerjoin"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Organisation"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OrganisationId "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" Organisation"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Id"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("assignment_set_selector"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveEndDate "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("effective_date"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("assignment_set_selector"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StateValue "),a("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("filter")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("EffectiveEndDate "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" self"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("effective_date"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("distinct"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("DISTINCT")]),t._v("\n  assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"PersonId"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"assignment_PersonId"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"Id"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"assignment_Id"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"AssignmentNumber"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"assignment_AssignmentNumber"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"EffectiveDate"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"assignment_EffectiveDate"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"NormalHoursSessions"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"assignment_NormalHoursSessions"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"Grade"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"assignment_Grade"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"PayrollName"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"assignment_PayrollName"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"PositionName"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"assignment_PositionName"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"OrganisationId"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"assignment_OrganisationId"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  organisation"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"OrganisationName"')]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"organisation_OrganisationName"')]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" assignment\n"),a("span",{attrs:{class:"token keyword"}},[t._v("JOIN")]),t._v(" assignment "),a("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" assignment_1 "),a("span",{attrs:{class:"token keyword"}},[t._v("ON")]),t._v(" assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"PersonId"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" assignment_1"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"PersonId"')]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("LEFT")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("OUTER")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("JOIN")]),t._v(" organisation "),a("span",{attrs:{class:"token keyword"}},[t._v("ON")]),t._v(" assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"OrganisationId"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" organisation"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"Id"')]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" assignment_1"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"EffectiveEndDate"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" ?\n"),a("span",{attrs:{class:"token operator"}},[t._v("AND")]),t._v(" assignment_1"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"StateValue"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" ?\n"),a("span",{attrs:{class:"token operator"}},[t._v("AND")]),t._v(" assignment"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token string"}},[t._v('"EffectiveEndDate"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" ?\n")])])])}],!1,null,null,null);e.options.__file="extracting-data-with-sqlalchemy.md";s.default=e.exports}}]);