<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Initializing Model Classes | C# Interface port to Python</title>
    <meta name="description" content="C# Interface port to Python">
    
    
    <link rel="preload" href="/esrgo-python-documentation/assets/css/styles.08b8ebf7.css" as="style"><link rel="preload" href="/esrgo-python-documentation/assets/js/app.08b8ebf7.js" as="script"><link rel="preload" href="/esrgo-python-documentation/assets/js/13.542e130d.js" as="script"><link rel="preload" href="/esrgo-python-documentation/assets/css/5.styles.92ce2759.css" as="style"><link rel="preload" href="/esrgo-python-documentation/assets/js/5.92ce2759.js" as="script"><link rel="prefetch" href="/esrgo-python-documentation/assets/css/1.styles.dacdc8f1.css"><link rel="prefetch" href="/esrgo-python-documentation/assets/js/1.dacdc8f1.js"><link rel="prefetch" href="/esrgo-python-documentation/assets/css/2.styles.6df4aee8.css"><link rel="prefetch" href="/esrgo-python-documentation/assets/js/2.6df4aee8.js"><link rel="prefetch" href="/esrgo-python-documentation/assets/css/3.styles.62e3bade.css"><link rel="prefetch" href="/esrgo-python-documentation/assets/js/3.62e3bade.js"><link rel="prefetch" href="/esrgo-python-documentation/assets/js/4.e0e8277f.js"><link rel="prefetch" href="/esrgo-python-documentation/assets/js/6.b3d7e6cd.js"><link rel="prefetch" href="/esrgo-python-documentation/assets/js/7.fcd4ff92.js"><link rel="prefetch" href="/esrgo-python-documentation/assets/js/8.3d242c4d.js"><link rel="prefetch" href="/esrgo-python-documentation/assets/js/9.234d134d.js"><link rel="prefetch" href="/esrgo-python-documentation/assets/js/10.fb3d3e85.js"><link rel="prefetch" href="/esrgo-python-documentation/assets/js/11.d1c152da.js"><link rel="prefetch" href="/esrgo-python-documentation/assets/js/12.db983685.js"><link rel="prefetch" href="/esrgo-python-documentation/assets/js/14.bf07540b.js"><link rel="prefetch" href="/esrgo-python-documentation/assets/js/15.123c7fb9.js"><link rel="prefetch" href="/esrgo-python-documentation/assets/js/16.8c7136bb.js"><link rel="prefetch" href="/esrgo-python-documentation/assets/js/17.4bf3763a.js"><link rel="prefetch" href="/esrgo-python-documentation/assets/js/18.19d247d1.js"><link rel="prefetch" href="/esrgo-python-documentation/assets/js/19.a9221979.js">
    <link rel="stylesheet" href="/esrgo-python-documentation/assets/css/5.styles.92ce2759.css"><link rel="stylesheet" href="/esrgo-python-documentation/assets/css/styles.08b8ebf7.css"><link rel="stylesheet" href="/esrgo-python-documentation/assets/css/1.styles.dacdc8f1.css"><link rel="stylesheet" href="/esrgo-python-documentation/assets/css/2.styles.6df4aee8.css"><link rel="stylesheet" href="/esrgo-python-documentation/assets/css/3.styles.62e3bade.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/esrgo-python-documentation/" class="home-link router-link-active"><!----> <span class="site-name">C# Interface port to Python</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/esrgo-python-documentation/" class="nav-link">Overview</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Domain Model</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/domain-generation.html" class="nav-link">Domain Model Code Generation</a></li><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/serializing-objects.html" class="nav-link">Serializing Objects in Correct Order</a></li><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/initializing-model-classes.html" class="nav-link router-link-exact-active router-link-active">Initializing Model Classes</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Processing</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/commands.html" class="nav-link">Commands</a></li><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/csv-processing.html" class="nav-link">CSV Processing</a></li><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/file-handling-with-regex.html" class="nav-link">File Handling with Regex</a></li><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/logging-with-xml-serialization.html" class="nav-link">Logging with XML Serialization</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">SqlAlchemy</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/extracting-data-with-sqlalchemy.html" class="nav-link">Extracting Data with SqlAlchemy ORM</a></li><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/query-windowing-with-sqlalchemy.html" class="nav-link">Query Windowing with SqlAlchemy ORM</a></li><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/query-windowing-with-a-filter-criteria.html" class="nav-link">Query Windowing with a Filter Criteria</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/esrgo-python-documentation/" class="nav-link">Overview</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Domain Model</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/domain-generation.html" class="nav-link">Domain Model Code Generation</a></li><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/serializing-objects.html" class="nav-link">Serializing Objects in Correct Order</a></li><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/initializing-model-classes.html" class="nav-link router-link-exact-active router-link-active">Initializing Model Classes</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Processing</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/commands.html" class="nav-link">Commands</a></li><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/csv-processing.html" class="nav-link">CSV Processing</a></li><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/file-handling-with-regex.html" class="nav-link">File Handling with Regex</a></li><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/logging-with-xml-serialization.html" class="nav-link">Logging with XML Serialization</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">SqlAlchemy</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/extracting-data-with-sqlalchemy.html" class="nav-link">Extracting Data with SqlAlchemy ORM</a></li><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/query-windowing-with-sqlalchemy.html" class="nav-link">Query Windowing with SqlAlchemy ORM</a></li><li class="dropdown-item"><!----> <a href="/esrgo-python-documentation/query-windowing-with-a-filter-criteria.html" class="nav-link">Query Windowing with a Filter Criteria</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Initializing Model Classes</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/esrgo-python-documentation/initializing-model-classes.html#overview" class="sidebar-link">Overview</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/esrgo-python-documentation/initializing-model-classes.html#keyword-args" class="sidebar-link">Keyword Args</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/esrgo-python-documentation/initializing-model-classes.html#star-args" class="sidebar-link">Star Args</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/esrgo-python-documentation/initializing-model-classes.html#modelbase-methods-to-support-parsing-args-from-various-types" class="sidebar-link">ModelBase methods to support parsing *args from various types</a></li><li class="sidebar-sub-header"><a href="/esrgo-python-documentation/initializing-model-classes.html#initial-parsing-of-args" class="sidebar-link">Initial Parsing of *args</a></li><li class="sidebar-sub-header"><a href="/esrgo-python-documentation/initializing-model-classes.html#processing-the-incoming-dictionary" class="sidebar-link">Processing the incoming dictionary</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="initializing-model-classes"><a href="#initializing-model-classes" aria-hidden="true" class="header-anchor">#</a> Initializing Model Classes</h1> <h2 id="overview"><a href="#overview" aria-hidden="true" class="header-anchor">#</a> Overview</h2> <p>Use of *args and **kwargs parameters provides a convenient way to initialise Model instances via the constructor.</p> <p>Usages:</p> <ul><li><p><strong>Table join results from SqlAlchemy</strong>
A query with table joins has no explicit mapping for the return row, so SqlAlchemy creates a keyedtuple. This can be passed in to *args to instantiate an object.</p></li> <li><p><strong>Strongly type the json returned from a REST call</strong>
RavenDb returns documents as json. To strongly type the results, we convert the json to a dictionary and pass it to an object constructor.</p></li> <li><p><strong>Initialise a compound object from individual objects</strong>
A data transfer object (DTO) may be composed from several Model objects. These component objects can be passed in to the compound DTO via *args.</p></li></ul> <h2 id="keyword-args"><a href="#keyword-args" aria-hidden="true" class="header-anchor">#</a> Keyword Args</h2> <p>Using **kwargs is straightforward, e.g to initialise fixture objects in unit tests:</p> <pre><code>address = Address(Id=10, EffectiveDate=date(2012, 1, 7), StateValue=1)
</code></pre> <p>implemented by a method in ModelBase class:</p> <pre><code>def initialise_from_kwargs(obj, **kwargs):
    for key in kwargs:
        if kwargs[key]:
            setattr(obj, key, kwargs[key])
</code></pre> <h2 id="star-args"><a href="#star-args" aria-hidden="true" class="header-anchor">#</a> Star Args</h2> <p>This format is more general, which means the implementation needs to be a bit more complicated.</p> <h3 id="modelbase-methods-to-support-parsing-args-from-various-types"><a href="#modelbase-methods-to-support-parsing-args-from-various-types" aria-hidden="true" class="header-anchor">#</a> ModelBase methods to support parsing *args from various types</h3> <p>The ModelBase class has an init_from_args method which takes *args and **kwargs parameters, which means just about anything can be passed in to it.</p> <p>Handling **kwargs is straightforward, as shown above but *args needs some support from parser functions.</p> <h3 id="initial-parsing-of-args"><a href="#initial-parsing-of-args" aria-hidden="true" class="header-anchor">#</a> Initial Parsing of *args</h3> <p>The first job is to parse *args. The composition can vary depending on the use case. The aim of this function is to find two parameters for the _parse_dict function - the type of the object and the dictionary of attribute values.</p> <p><strong>initialise_from_args function</strong></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">initialise_from_args</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token operator">not</span> args<span class="token punctuation">:</span>
        <span class="token keyword">return</span>

    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">and</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span>

    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">and</span> args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span>

    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">and</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">dict</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        _parse_dict<span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'UNKNOWN_TYPE'</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>

    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">and</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">dict</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        _parse_dict<span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>__name__<span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>

    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">and</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> KeyedTuple<span class="token punctuation">)</span><span class="token punctuation">:</span>
        _parse_dict<span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'UNKNOWN_TYPE'</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>_asdict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>

    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">and</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> KeyedTuple<span class="token punctuation">)</span><span class="token punctuation">:</span>
        _parse_dict<span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>__name__<span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>_asdict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>

    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">and</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        _parse_dict<span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__name__<span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>__dict__<span class="token punctuation">)</span>
        <span class="token keyword">return</span>

    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">and</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        _parse_dict<span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>__name__<span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>__dict__<span class="token punctuation">)</span>
        <span class="token keyword">return</span>

    <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span>args<span class="token punctuation">)</span>
</code></pre></div><h4 id="keyedtuple-conversion"><a href="#keyedtuple-conversion" aria-hidden="true" class="header-anchor">#</a> KeyedTuple Conversion</h4> <p>A KeyedTuple are converted to a dictionary via the expression:</p> <pre><code>dict((key, self.__dict__[key]) for key in self.keys())
</code></pre> <p>which is supplied by the SqlAlchemy library via the internal _asdict() method.</p> <h3 id="processing-the-incoming-dictionary"><a href="#processing-the-incoming-dictionary" aria-hidden="true" class="header-anchor">#</a> Processing the incoming dictionary</h3> <p>The _parse_dict function is common to all use cases. It determines if the the dictionary keys correspond to attributes of the class, if so sets the value.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">_parse_dict</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> type_name<span class="token punctuation">,</span> initial_dict<span class="token punctuation">)</span><span class="token punctuation">:</span>
    initial_keys <span class="token operator">=</span> <span class="token punctuation">[</span>key <span class="token keyword">for</span> key <span class="token keyword">in</span> initial_dict 
                    <span class="token keyword">if</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token operator">or</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> type_name <span class="token operator">+</span> <span class="token string">'_'</span> <span class="token operator">+</span> key<span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> key <span class="token keyword">in</span> initial_keys<span class="token punctuation">:</span>
        value <span class="token operator">=</span> initial_dict<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
        <span class="token keyword">if</span> value<span class="token punctuation">:</span>  <span class="token comment"># don't override object default value if value is None</span>
            _setattr<span class="token punctuation">(</span>obj<span class="token punctuation">,</span> type_name<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">_setattr</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> type_name<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
    qualified_key <span class="token operator">=</span> type_name <span class="token operator">+</span> <span class="token string">'_'</span> <span class="token operator">+</span> key
    <span class="token keyword">if</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> qualified_key<span class="token punctuation">)</span><span class="token punctuation">:</span>
        target_key <span class="token operator">=</span> qualified_key
    <span class="token keyword">elif</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">:</span>
        target_key <span class="token operator">=</span> key
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span>
    value <span class="token operator">=</span> _convert<span class="token punctuation">(</span>obj<span class="token punctuation">,</span> target_key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token builtin">setattr</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> target_key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>  <span class="token comment"># Attribute may not be settable, e.g a read-only property</span>
        <span class="token keyword">return</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">_convert</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> target_key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
    attribute_type <span class="token operator">=</span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token builtin">getattr</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> target_key<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token builtin">type</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">str</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">type</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">str</span> <span class="token operator">and</span> attribute_type <span class="token operator">==</span> date<span class="token punctuation">:</span>
            <span class="token keyword">if</span> value <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">:</span>
                value <span class="token operator">=</span> <span class="token string">&quot;1900-01-01&quot;</span>
            value <span class="token operator">=</span> datetime<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token string">'%Y-%m-%d'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>date<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> attribute_type <span class="token operator">==</span> datetime<span class="token punctuation">:</span>
            <span class="token keyword">if</span> value <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">:</span>
                value <span class="token operator">=</span> <span class="token string">&quot;1900-01-01T00:00:00&quot;</span>
            value <span class="token operator">=</span> datetime<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token string">'%Y-%m-%dT%H:%M:%S'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> attribute_type <span class="token operator">==</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> value <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">:</span>
                value <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span>
            value <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token keyword">if</span> attribute_type <span class="token operator">==</span> Decimal<span class="token punctuation">:</span>
            <span class="token keyword">if</span> value <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">:</span>
                value <span class="token operator">=</span> <span class="token string">&quot;0.0&quot;</span>
            value <span class="token operator">=</span> Decimal<span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span>quantize<span class="token punctuation">(</span>Decimal<span class="token punctuation">(</span><span class="token string">'.01'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rounding<span class="token operator">=</span>ROUND_HALF_EVEN<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token builtin">type</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">==</span> datetime <span class="token operator">and</span> attribute_type <span class="token operator">==</span> date<span class="token punctuation">:</span>
        value <span class="token operator">=</span> value<span class="token punctuation">.</span>date<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> value
</code></pre></div><h4 id="qualified-attributes-in-dto’s"><a href="#qualified-attributes-in-dto’s" aria-hidden="true" class="header-anchor">#</a> Qualified Attributes in DTO’s</h4> <p>DTO’s which are composites of multiple objects can have special case attributes for the component object keys. These are qualified with the type, for example:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">PersonAndAssignment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>Assignment_Id <span class="token operator">=</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>Assignment_EffectiveDate <span class="token operator">=</span> date<span class="token punctuation">(</span><span class="token number">1900</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>Assignment_EffectiveEndDate <span class="token operator">=</span> date<span class="token punctuation">(</span><span class="token number">9999</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>Assignment_StateValue <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token operator">&lt;&lt;</span>other Assignment attributes here<span class="token operator">&gt;&gt;</span>

        self<span class="token punctuation">.</span>PersonDetail_Id <span class="token operator">=</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>PersonDetail_EffectiveDate <span class="token operator">=</span> date<span class="token punctuation">(</span><span class="token number">1900</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>PersonDetail_EffectiveEndDate <span class="token operator">=</span> date<span class="token punctuation">(</span><span class="token number">9999</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>PersonDetail_StateValue <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token operator">&lt;&lt;</span>other PersonDetail attributes here<span class="token operator">&gt;&gt;</span>
</code></pre></div><div class="minimap-container" style="width:250px;" data-v-5674b532><div class="minimap" style="top:250px;zoom:25%;" data-v-5674b532><div data-v-5674b532></div></div></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/esrgo-python-documentation/assets/js/13.542e130d.js" defer></script><script src="/esrgo-python-documentation/assets/js/5.92ce2759.js" defer></script><script src="/esrgo-python-documentation/assets/js/app.08b8ebf7.js" defer></script>
  </body>
</html>
